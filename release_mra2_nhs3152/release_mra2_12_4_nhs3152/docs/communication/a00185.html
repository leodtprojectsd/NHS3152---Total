<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NHS31xx msg - Message Handler Protocol: NFC Program loader app.spec. messages</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="nxp-logo_small.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NHS31xx msg - Message Handler Protocol
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('a00185.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a>  </div>
  <div class="headertitle">
<div class="title">NFC Program loader app.spec. messages</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This file describes the protocol used for the Message Handler Module in the NFC program loader application (closed).</p>
<ol type="1">
<li>(NHS31xx) Once the NHS31xx is started (either by a resetN or a by a NFC field) the downloader is initialized, and a <a class="el" href="a00187.html#a00272">MSG_RESPONSE_GETVERSION_T</a> response is placed in NFC memory.</li>
<li>(HOST) From that moment on, a HOST (tag reader) can start sending <a class="el" href="a00185.html#a00192">CMD_INCOMING_PACKAGE_T</a> commands containing data chunks. Every incremental message has an id equal to <a class="el" href="a00186.html#ggac3ff89e2c2e5acb60a41d71a3a0a9a5cabe56e45cc23e50ad0997f32c7e29f648">MSG_INCOMING_PACKAGE</a>. The NHS31xx expects a binary file to be downloaded from lower to higher addresses (starting from address 0x0).</li>
<li>(NHS31xx) This command will be answered/acknowledged as fast as possible, this is done via a <a class="el" href="a00187.html#a00268">MSG_RESPONSE_RESULTONLY_T</a> response. The <code>result</code> can be a <a class="el" href="a00187.html#gac3a37ecb0a07b0937ff46b3f4ae8a1ee">MSG_ERR_T</a> or a <a class="el" href="a00185.html#gaa279865b5cfb86d145150da3a260aab2">DOWNLOAD_REPORT_MSG_ERR_T</a></li>
<li>(HOST) as long as the result is <a class="el" href="a00185.html#ggaa279865b5cfb86d145150da3a260aab2afd23afacd3e53f142b55e1025a001d59">DOWNLOAD_ONGOING</a>, the host can send new data chunks.</li>
<li>(HOST) the very last package send to NHS31xx is slightly different from the incremental once, the header looks the same accept for the message id which is equal to <a class="el" href="a00186.html#ggac3ff89e2c2e5acb60a41d71a3a0a9a5ca7f5b21dcb5f8a50c7c8da9b35684fc2a">MSG_LAST_INCOMING_PACKAGE</a>. In this package, the data chunk is followed by the file CRC. The new program download will only be finalized when the in target calculated CRC matches the file CRC.</li>
</ol>
<p>Following message flow describes a successful download cycle: </p><div class="mscgraph">
<img src="msc_inline_mscgraph_1.png" alt="msc_inline_mscgraph_1" border="0" usemap="#msc_inline_mscgraph_1.map"/>
<map name="msc_inline_mscgraph_1.map" id="msc_inline_mscgraph_1.map"><area href="a00187.html#a00272" shape="rect" coords="430,45,531,58" alt=""/>
<area href="a00187.html#a00272" shape="rect" coords="410,58,550,71" alt=""/>
<area href="a00185.html#a00192" shape="rect" coords="388,96,573,109" alt=""/>
<area href="a00185.html#a00192" shape="rect" coords="381,109,579,122" alt=""/>
<area href="a00187.html#a00268" shape="rect" coords="374,147,586,160" alt=""/>
<area href="a00187.html#a00268" shape="rect" coords="379,160,581,173" alt=""/>
<area href="a00187.html#a00268" shape="rect" coords="376,173,584,186" alt=""/>
<area href="a00185.html#a00192" shape="rect" coords="388,243,573,256" alt=""/>
<area href="a00185.html#a00192" shape="rect" coords="381,256,579,269" alt=""/>
<area href="a00187.html#a00268" shape="rect" coords="374,294,586,307" alt=""/>
<area href="a00187.html#a00268" shape="rect" coords="379,307,581,320" alt=""/>
<area href="a00187.html#a00268" shape="rect" coords="376,320,584,333" alt=""/>
<area href="a00185.html#a00192" shape="rect" coords="322,466,638,479" alt=""/>
<area href="a00185.html#a00192" shape="rect" coords="359,479,602,492" alt=""/>
<area href="a00187.html#a00268" shape="rect" coords="374,549,586,562" alt=""/>
<area href="a00187.html#a00268" shape="rect" coords="357,562,604,575" alt=""/>
<area href="a00187.html#a00268" shape="rect" coords="357,575,604,588" alt=""/>
</map>
</div>
<dl class="section note"><dt>Note</dt><dd>Mind that, if for some reason an error occurs (protocol error/download error) the response will contain the corresponding result (<a class="el" href="a00187.html#gac3a37ecb0a07b0937ff46b3f4ae8a1ee">MSG_ERR_T</a> or <a class="el" href="a00185.html#gaa279865b5cfb86d145150da3a260aab2">DOWNLOAD_REPORT_MSG_ERR_T</a>). If that happens, the NHS31xx needs to go through a reset cycle. Either by resetN or by re-providing the NFC field. iow, the complete download cycle has to be re-done. </dd></dl>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:a00192"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00185.html#a00192">CMD_INCOMING_PACKAGE_T</a></td></tr>
<tr class="separator:a00192"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gab90152efb9d26580d27f98514cf2ca2a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00185.html#gab90152efb9d26580d27f98514cf2ca2a">MIME_TYPE</a>&#160;&#160;&#160;&quot;N/P&quot;</td></tr>
<tr class="separator:gab90152efb9d26580d27f98514cf2ca2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6e515d9931a2b7ed9b2a89e87b382725"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00185.html#ga6e515d9931a2b7ed9b2a89e87b382725">MIME_TYPE_LENGTH</a>&#160;&#160;&#160;3</td></tr>
<tr class="separator:ga6e515d9931a2b7ed9b2a89e87b382725"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga523eaf5b650f38c307a6aab7f957fa2b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00185.html#ga523eaf5b650f38c307a6aab7f957fa2b">MAX_CHUNK_SIZE</a>&#160;&#160;&#160;NFC_SHARED_MEM_BYTE_SIZE - NDEFT2T_MSG_OVERHEAD(false, NDEFT2T_GetMimeRecordOverhead(false, <a class="el" href="a00185.html#ga6e515d9931a2b7ed9b2a89e87b382725">MIME_TYPE_LENGTH</a>) + sizeof(<a class="el" href="a00185.html#a00192">CMD_INCOMING_PACKAGE_T</a>))</td></tr>
<tr class="separator:ga523eaf5b650f38c307a6aab7f957fa2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gaa279865b5cfb86d145150da3a260aab2"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00185.html#gaa279865b5cfb86d145150da3a260aab2">DOWNLOAD_REPORT_MSG_ERR_T</a> { <br />
&#160;&#160;<a class="el" href="a00185.html#ggaa279865b5cfb86d145150da3a260aab2a64de4a032d1526a227fe68914626fba0">DOWNLOAD_COMPLETE_OK</a> = 1, 
<br />
&#160;&#160;<a class="el" href="a00185.html#ggaa279865b5cfb86d145150da3a260aab2afd23afacd3e53f142b55e1025a001d59">DOWNLOAD_ONGOING</a> = 2, 
<br />
&#160;&#160;<a class="el" href="a00185.html#ggaa279865b5cfb86d145150da3a260aab2a918fed98c73c8caf4c0f4e047abfeb8b">DOWNLOAD_FAILED_IMAGE_TOO_BIG</a> = 3, 
<br />
&#160;&#160;<a class="el" href="a00185.html#ggaa279865b5cfb86d145150da3a260aab2a74f34ce7b82c5b4e12c71f054972f396">DOWNLOAD_FAILED_FILE_INVALID_CHUNKSIZE</a> = 4, 
<br />
&#160;&#160;<a class="el" href="a00185.html#ggaa279865b5cfb86d145150da3a260aab2a664e9c382d351e85ef9d54ab7ae14a84">DOWNLOAD_FAILED_FILE_CRC_MISMATCH</a> = 5, 
<br />
&#160;&#160;<a class="el" href="a00185.html#ggaa279865b5cfb86d145150da3a260aab2a53163dade4fca3df8bde037cc1257026">DOWNLOAD_COMMUNICATION_FAILED</a> = 6, 
<br />
&#160;&#160;<b>DOWNLOAD_REPORT_MSG_ERR_LAST_USED</b> = DOWNLOAD_COMMUNICATION_FAILED
<br />
 }</td></tr>
<tr class="separator:gaa279865b5cfb86d145150da3a260aab2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac3ff89e2c2e5acb60a41d71a3a0a9a5c"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00185.html#gac3ff89e2c2e5acb60a41d71a3a0a9a5c">MSGHANDLER_MSG_ID_T</a> { <br />
&#160;&#160;<a class="el" href="a00186.html#ggac3ff89e2c2e5acb60a41d71a3a0a9a5cabe56e45cc23e50ad0997f32c7e29f648">MSG_INCOMING_PACKAGE</a> = 0x48, 
<br />
&#160;&#160;<a class="el" href="a00186.html#ggac3ff89e2c2e5acb60a41d71a3a0a9a5ca7f5b21dcb5f8a50c7c8da9b35684fc2a">MSG_LAST_INCOMING_PACKAGE</a> = 0x49, 
<br />
&#160;&#160;<a class="el" href="a00186.html#ggac3ff89e2c2e5acb60a41d71a3a0a9a5caea07e32f2930cab3fb0234fe28808f97">MSG_ID_SETPRISTINE</a> = 0x5A, 
<br />
&#160;&#160;<a class="el" href="a00186.html#ggac3ff89e2c2e5acb60a41d71a3a0a9a5cad894dcebed66b5db9796b66b5216d7ae">MSG_ID_SETRHYTHM</a> = 0x55, 
<br />
&#160;&#160;<a class="el" href="a00186.html#ggac3ff89e2c2e5acb60a41d71a3a0a9a5ca4adf9ba149245183063d31aae7ebd3fe">MSG_ID_GETRHYTHM</a> = 0x56, 
<br />
&#160;&#160;<a class="el" href="a00186.html#ggac3ff89e2c2e5acb60a41d71a3a0a9a5ca97f9f85ea74a399ea6e8fd6022e87424">MSG_ID_START</a> = 0x57, 
<br />
&#160;&#160;<a class="el" href="a00186.html#ggac3ff89e2c2e5acb60a41d71a3a0a9a5ca602fba4a39c0301a908b775c0ce475d6">MSG_ID_GETSTART</a> = 0x58, 
<br />
&#160;&#160;<a class="el" href="a00186.html#ggac3ff89e2c2e5acb60a41d71a3a0a9a5ca2f0fa1c9985e7f944727877791777b5a">MSG_ID_GETPILLREMOVALS</a> = 0x5D
<br />
 }</td></tr>
<tr class="separator:gac3ff89e2c2e5acb60a41d71a3a0a9a5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="a00192" id="a00192"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00192">&#9670;&nbsp;</a></span>CMD_INCOMING_PACKAGE_T</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct CMD_INCOMING_PACKAGE_T</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"><p>Structure defining the incoming packages This 'header' is followed by the data chunk with size defined in <code>chunkSize</code>. If <code>id</code> is <a class="el" href="a00186.html#ggac3ff89e2c2e5acb60a41d71a3a0a9a5ca7f5b21dcb5f8a50c7c8da9b35684fc2a">MSG_LAST_INCOMING_PACKAGE</a> this 'header' + data chunk is followed by the 16bits binary CRC. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="a00186.html#ggac3ff89e2c2e5acb60a41d71a3a0a9a5cabe56e45cc23e50ad0997f32c7e29f648">MSG_INCOMING_PACKAGE</a> </dd>
<dd>
<a class="el" href="a00186.html#ggac3ff89e2c2e5acb60a41d71a3a0a9a5ca7f5b21dcb5f8a50c7c8da9b35684fc2a">MSG_LAST_INCOMING_PACKAGE</a> </dd></dl>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a id="aeb7cc51b3800b40d4b1f8f5a1464df29"></a>uint16_t</td>
<td class="fieldname">
chunkSize</td>
<td class="fielddoc">
<p>This field holds the number of valid data bytes which will follow after this header. </p><dl class="section note"><dt>Note</dt><dd>This value is limited by <a class="el" href="a00185.html#ga523eaf5b650f38c307a6aab7f957fa2b">MAX_CHUNK_SIZE</a>. </dd>
<dd>
If <code>id</code> is <a class="el" href="a00186.html#ggac3ff89e2c2e5acb60a41d71a3a0a9a5ca7f5b21dcb5f8a50c7c8da9b35684fc2a">MSG_LAST_INCOMING_PACKAGE</a> chunkSize does not include the CRC size. </dd></dl>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gab90152efb9d26580d27f98514cf2ca2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab90152efb9d26580d27f98514cf2ca2a">&#9670;&nbsp;</a></span>MIME_TYPE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIME_TYPE&#160;&#160;&#160;&quot;N/P&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Mime type to be used in the data transfer </p>

</div>
</div>
<a id="ga6e515d9931a2b7ed9b2a89e87b382725"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6e515d9931a2b7ed9b2a89e87b382725">&#9670;&nbsp;</a></span>MIME_TYPE_LENGTH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIME_TYPE_LENGTH&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Size of mime type used in the data transfer </p>

</div>
</div>
<a id="ga523eaf5b650f38c307a6aab7f957fa2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga523eaf5b650f38c307a6aab7f957fa2b">&#9670;&nbsp;</a></span>MAX_CHUNK_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_CHUNK_SIZE&#160;&#160;&#160;NFC_SHARED_MEM_BYTE_SIZE - NDEFT2T_MSG_OVERHEAD(false, NDEFT2T_GetMimeRecordOverhead(false, <a class="el" href="a00185.html#ga6e515d9931a2b7ed9b2a89e87b382725">MIME_TYPE_LENGTH</a>) + sizeof(<a class="el" href="a00185.html#a00192">CMD_INCOMING_PACKAGE_T</a>))</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Maximum size of data chunk to be send by the HOST Using this size will result in optimal use of shared memory </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="gaa279865b5cfb86d145150da3a260aab2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa279865b5cfb86d145150da3a260aab2">&#9670;&nbsp;</a></span>DOWNLOAD_REPORT_MSG_ERR_T</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="a00185.html#gaa279865b5cfb86d145150da3a260aab2">DOWNLOAD_REPORT_MSG_ERR_T</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Lists all possible download errors codes that may be returned. Extends <a class="el" href="a00187.html#gac3a37ecb0a07b0937ff46b3f4ae8a1ee">MSG_ERR_T</a> </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggaa279865b5cfb86d145150da3a260aab2a64de4a032d1526a227fe68914626fba0"></a>DOWNLOAD_COMPLETE_OK&#160;</td><td class="fielddoc"><p><code>0x01</code> <br />
 No error was found. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaa279865b5cfb86d145150da3a260aab2afd23afacd3e53f142b55e1025a001d59"></a>DOWNLOAD_ONGOING&#160;</td><td class="fielddoc"><p><code>0x02</code> <br />
 Ongoing Download. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaa279865b5cfb86d145150da3a260aab2a918fed98c73c8caf4c0f4e047abfeb8b"></a>DOWNLOAD_FAILED_IMAGE_TOO_BIG&#160;</td><td class="fielddoc"><p><code>0x03</code> <br />
 The image did not fit in user flash </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaa279865b5cfb86d145150da3a260aab2a74f34ce7b82c5b4e12c71f054972f396"></a>DOWNLOAD_FAILED_FILE_INVALID_CHUNKSIZE&#160;</td><td class="fielddoc"><p><code>0x04</code> <br />
 The given chunk size does not match with the total CMD size </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaa279865b5cfb86d145150da3a260aab2a664e9c382d351e85ef9d54ab7ae14a84"></a>DOWNLOAD_FAILED_FILE_CRC_MISMATCH&#160;</td><td class="fielddoc"><p><code>0x05</code> <br />
 The calculated CRC doesn't match with the received CRC </p>
</td></tr>
<tr><td class="fieldname"><a id="ggaa279865b5cfb86d145150da3a260aab2a53163dade4fca3df8bde037cc1257026"></a>DOWNLOAD_COMMUNICATION_FAILED&#160;</td><td class="fielddoc"><p><code>0x06</code> <br />
 General ERROR, i.e. non valid command ID </p>
</td></tr>
</table>

</div>
</div>
<a id="gac3ff89e2c2e5acb60a41d71a3a0a9a5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac3ff89e2c2e5acb60a41d71a3a0a9a5c">&#9670;&nbsp;</a></span>MSGHANDLER_MSG_ID_T</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="a00185.html#gac3ff89e2c2e5acb60a41d71a3a0a9a5c">MSGHANDLER_MSG_ID_T</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Supported application commands </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggac3ff89e2c2e5acb60a41d71a3a0a9a5cabe56e45cc23e50ad0997f32c7e29f648"></a>MSG_INCOMING_PACKAGE&#160;</td><td class="fielddoc"><p><code>0x48</code> <br />
 Incremental data package </p>
</td></tr>
<tr><td class="fieldname"><a id="ggac3ff89e2c2e5acb60a41d71a3a0a9a5ca7f5b21dcb5f8a50c7c8da9b35684fc2a"></a>MSG_LAST_INCOMING_PACKAGE&#160;</td><td class="fielddoc"><p><code>0x49</code> <br />
 Last incremental data package including the binary CRC </p>
</td></tr>
<tr><td class="fieldname"><a id="ggac3ff89e2c2e5acb60a41d71a3a0a9a5caea07e32f2930cab3fb0234fe28808f97"></a>MSG_ID_SETPRISTINE&#160;</td><td class="fielddoc"><p><code>0x5A</code> <br />
Removes all information that was received via any command. Removes all stored events. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">MSG_CMD_TAGONLY_T</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="a00187.html#a00268">MSG_RESPONSE_RESULTONLY_T</a> </dd></dl>
<dl class="section note"><dt>Note</dt><dd>synchronous command </dd></dl>
</td></tr>
<tr><td class="fieldname"><a id="ggac3ff89e2c2e5acb60a41d71a3a0a9a5cad894dcebed66b5db9796b66b5216d7ae"></a>MSG_ID_SETRHYTHM&#160;</td><td class="fielddoc"><p><code>0x55</code> <br />
Defines the rhythm the patient must adhere to when following the therapy. The application will determine based on this information whether the patient still adheres to the therapy. </p><dl class="section note"><dt>Note</dt><dd>In case the application tracks different pills - each pill is specific and the order of intake of each pill is important - it is assumed the first pill must ideally be taken at the first pill intake moment, the nth pill must ideally be taken at the nth pill intake moment, and so on. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">MSG_CMD_SETRHYTHM_T</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="a00187.html#a00268">MSG_RESPONSE_RESULTONLY_T</a> </dd></dl>
<dl class="section note"><dt>Note</dt><dd>synchronous command </dd></dl>
</td></tr>
<tr><td class="fieldname"><a id="ggac3ff89e2c2e5acb60a41d71a3a0a9a5ca4adf9ba149245183063d31aae7ebd3fe"></a>MSG_ID_GETRHYTHM&#160;</td><td class="fielddoc"><p><code>0x56</code> <br />
Retrieves rhythm information that was set by the last command with id <a class="el" href="a00186.html#ggac3ff89e2c2e5acb60a41d71a3a0a9a5cad894dcebed66b5db9796b66b5216d7ae">MSG_ID_SETRHYTHM</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">MSG_CMD_TAGONLY_T</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>MSG_RESPONSE_GETRHYTHM_T </dd></dl>
<dl class="section note"><dt>Note</dt><dd>synchronous command </dd></dl>
</td></tr>
<tr><td class="fieldname"><a id="ggac3ff89e2c2e5acb60a41d71a3a0a9a5ca97f9f85ea74a399ea6e8fd6022e87424"></a>MSG_ID_START&#160;</td><td class="fielddoc"><p><code>0x57</code> <br />
Sets the time when the therapy starts. When this command is received, events will be tracked and followed up by the IC. All events before the given start time are considered out-of-band; all events after the given start time that do not follow the prescribed rhythm are also considered out-of-band. </p><dl class="section note"><dt>Note</dt><dd>Mandatory configuration messages that must be exchanged before this command is accepted:<ul>
<li><a class="el" href="a00186.html#ggac3ff89e2c2e5acb60a41d71a3a0a9a5cad894dcebed66b5db9796b66b5216d7ae">MSG_ID_SETRHYTHM</a></li>
</ul>
</dd>
<dd>
The therapy ends automatically when all drugs have been taken, or when a command with message id <a class="el" href="a00186.html#ggac3ff89e2c2e5acb60a41d71a3a0a9a5caea07e32f2930cab3fb0234fe28808f97">MSG_ID_SETPRISTINE</a> is received. </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>The therapy has not yet been started. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname"><a class="el" href="a00186.html#a00200">MSG_CMD_START_T</a></td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="a00187.html#a00268">MSG_RESPONSE_RESULTONLY_T</a> </dd></dl>
<dl class="section note"><dt>Note</dt><dd>synchronous command </dd></dl>
</td></tr>
<tr><td class="fieldname"><a id="ggac3ff89e2c2e5acb60a41d71a3a0a9a5ca602fba4a39c0301a908b775c0ce475d6"></a>MSG_ID_GETSTART&#160;</td><td class="fielddoc"><p><code>0x58</code> <br />
Retrieves the start time that was set by the last command with id <a class="el" href="a00186.html#ggac3ff89e2c2e5acb60a41d71a3a0a9a5ca97f9f85ea74a399ea6e8fd6022e87424">MSG_ID_START</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">MSG_CMD_TAGONLY_T</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="a00186.html#a00204">MSG_RESPONSE_GETSTART_T</a> </dd></dl>
<dl class="section note"><dt>Note</dt><dd>synchronous command </dd></dl>
</td></tr>
<tr><td class="fieldname"><a id="ggac3ff89e2c2e5acb60a41d71a3a0a9a5ca2f0fa1c9985e7f944727877791777b5a"></a>MSG_ID_GETPILLREMOVALS&#160;</td><td class="fielddoc"><p><code>0x5D</code> <br />
Retrieves all pill removals that have been recorded since the start of the therapy. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">MSG_CMD_TAGONLY_T</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="a00186.html#a00208">MSG_RESPONSE_GETPILLREMOVALS_T</a> </dd></dl>
<dl class="section note"><dt>Note</dt><dd>synchronous command </dd>
<dd>
Retrieving the pill removals does <b>not</b> clear them from the IC. Issuing the same command again will yield the same response - possibly expanded with new removals. </dd></dl>
</td></tr>
</table>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Oct 20 2020 08:24:35 for NHS31xx msg - Message Handler Protocol by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
